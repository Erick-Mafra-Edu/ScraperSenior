# 

URL: https://documentacao.senior.com.br/ronda-senior/6.10.4/#faq/problemas_csmcenter.htm%3FTocPath%3DRonda%2520Senior%2520-%2520Manual%2520do%2520Usu%25C3%25A1rio%7CResolu%25C3%25A7%25C3%25A3o%2520de%2520Problemas%7C_____4

---


        
        
            
                
                SOLICITE UMA PROPOSTA
                
                
                    
                         PORTUGUÊS 
                     English Español
                    
                
            
        
        
        
        
            X
                
                
                /* <![CDATA[ */
                    hbspt.forms.create({
                        region: "na1",
                        portalId: "20786608",
                        formId: "bea53a5f-6a7c-4c2b-9cab-1832bfdb85e1"
                    });
                /* ]]> */
            
        
        PORTAL DE DOCUMENTAÇÃORonda Senior - versão 6.10.4
            
                
                
                
            
            x
            
        
        
            
                Ronda Senior - Manual do Usuário > Resolução de Problemas > CSM Center
                
            
            
                
                    
                    
                    
                    
                    
                    
                
            
            Resolução de problemas - CSM Center
            Depois de realizar a instalação da CSM Center, ao acessar a CSM Console 
 é exibida uma mensagem de erro de banco de dados
                
                    Quando 
 existem situações de erro na configuração ao acessar a CSM Console, pode ser exibida uma mensagem semelhante 
 a esta:
                    
                        
                    
                    Para obter mais informações é indispensável que seja analisado o arquivo 
 “Server.log” que está disponível na pasta de instalação da CSM Center, que está disponível no servidor da aplicação.
                    Importante 
                        Sugere-se não utilizar "SA" como usuário de acesso à base dados.
                    
                
            
            Configuração de instance no SQL Server
                
                    Em algumas ocasiões, durante a configuração na CSM Center config, pode-se informar erroneamente a instance, desta forma no Server.log podem ser apresentadas as mensagens abaixo:
                    
                        Caused by: java.lang.RuntimeException: java.sql.SQLException: Error in allocating a connection. Cause: Connection could not be allocated because: Server servidor has no instance named instance. 
                    
                    A situação ocorre porque a instance informada na CSM Center config está incorreta:
                    
                        
                    
                    Para verificar as corretas configurações do servidor SQL existem os comandos abaixo, que devem ser executados via ferramenta de banco:
                    Sp_helpserver:
                    
                    
                        
                    
                    Ao efetuar este comando será apresentado: nomedoservidor\instance, no exemplo acima temos:
                    
                        Servidor: TESTEACESSO
                        Instance: SQLEXPRESS
                    
                    Desta forma a configuração correta é:
                    
                        
                    
                
            
            Ausência de instance no SQL Server 
                
                    Esta situação pode ser identificada quando encontrada uma das mensagens abaixo no Server.log:
                    
                        Caused by: com.senior.seguranca.csmcenter.context.CsmCenterContextUnavailableException: java.lang.Exception: Não foi possível iniciar a CSM Center. Recurso "Erro tentando obter conexão com a base de dados" não encontrado ou não disponível.
                         
                        Caused by: java.lang.Exception: Não foi possível iniciar a CSM Center. Recurso "Erro tentando obter conexão com a base de dados" não encontrado ou não disponível.
                         
                        Caused by: com.senior.seguranca.csmcenter.utils.ext.resources.ResourceNotFoundException: Recurso "Erro tentando obter conexão com a base de dados" não encontrado ou não disponível.
                         
                        Caused by: java.sql.SQLException: Error in allocating a connection. Cause: Connection could not be allocated because: Unable to get information from SQL Server: SERVIDOR.
                    
                    Em algumas ocasiões o servidor SQL não possui instance configurada, 
 ao efetuar o select sp_helpserver é apresentado o seguinte o retorno:
                    
                        
                    
                    Neste caso, é necessário remover a instance da configuração da CSM Center, deixando-o em branco. 
                
            
            Configuração do Server name 
                
                    No Server.log é exibida a mensagem:
                    
                        Caused 
 by: java.sql.SQLException: Error in allocating a connection. Cause: Connection 
 could not be allocated because: Não é possível abrir o banco de dados 
 "base" solicitado pelo logon. Falha de logon.
                    
                    
                        Efetue o seguinte select via ferramenta de banco:
                    
                    
                        SELECT DB_NAME() AS DataBaseName
                    
                    
                        
                    
                    
                        Configure na CSM Center config:
                    
                    
                        
                    
                
            
            Configuração da porta do SQL 
                
                    Eventualmente a CSM Center pode não conectar exibindo a mensagem abaixo:
                    
                        Caused 
 by: java.lang.RuntimeException: java.sql.SQLException: Error in allocating 
 a connection. Cause: Connection could not be allocated because: Unable 
 to get information from SQL Server: testeacesso.
                    
                    Para verificar se a porta está correta, você pode executar via command 
 do Windows o comando abaixo (ele deve ser executado no servidor de banco):
                    
                        netstat -na | find "1433" (A porta 1433 pode ser alterada 
 de acordo com a porta configurada no servidor de banco)
                    
                    Se o retorno for exibido em branco (conforme imagem abaixo), é evidencia 
 que a porta está incorreta ou o serviço SQL Browser pode estar parado.
                    
                        
                    
                    Verifique o status do serviço “SQL Browser” no services do Windows e 
 a configuração de porta com o DBA do cliente, o retorno esperado é:
                    
                        
                    
                
            
            Mensagem "Não foi possível recuperar CRAAUT" no Server.log
                
                    No Server.log é exibida a seguinte mensagem:
                    
                        [#|2011-11-21T09:09:43.687-0200|WARNING|sun-appserver2.1|com.senior.seguranca.csmcenter.cmarsv.umainSv|_ThreadID=37;_ThreadName=p: 
 thread-pool-1; w: 22;_RequestID=d61ed430-2b0a-4c4d-b72e-0b334942283f;|[CSMCenter] 
 Não foi possível recuperar CRAAUT.
                    
                    
                        java.lang.NumberFormatException: 
 empty String
                    
                    A situação ocorre na build inicial da versão 5.6.2, basta atualizar 
 para a última build.
                
            
            Mensagem "Não encontrou cadastro do relógio 010.001.003.005" no Server.log
                
                    No arquivo Server.log é identificada uma mensagem contendo: "Não encontrou cadastro do 
 relógio 010.001.003.005"
                    A situação ocorre porque o campo RLGSEQ da tabela R250TAB fica com o 
 valor null e não carrega os equipamentos em memória na CSM Center.
                    Para corrigir a situação, atualize a CSM Center para a última build.
                    Importante 
                        No período em que 
 o coletor estiver rodando, as marcações serão enviadas para a tabela R070DAM, 
 para recuperá-las, após corrigir a situação efetue o seguinte procedimento:
                        
                            Abra o Ronda Senior;
                            Acesse o menu Diversos > Log > Coletor;
                            Preencha a data inicial e final das marcações;
                            Clique em Mostrar;
                            Verifique se as marcações correspondem ao período em que o coletor 
	 esteve "parado";
                            Clique em Recuperar para que as marcações sejam coletadas novamente.
                        
                    
                
            
            Todos os aplicativos aparecem sinalizados na cor vermelha no menu Diversos > Utilitários > Consultar 
 Aplicativos 
                
                    Ao acessar o menu Diversos > Utilitários > Consultar Aplicativos, 
 todos os aplicativos estão aparentemente off-line.
                    
                        
                    
                    Neste caso, é necessário configurar os aplicativos para trabalhar com a CSM Center.
                    Acesse o menu Diversos > Configuração Aplicativos e configure-os 
 com o endereço da CSM Center, conforme exemplo abaixo e altere a opção 
 Utiliza Servidor de Aplicações para "S":
                    
                        
                    
                    Desta forma os aplicativos voltarão a ficar on-line.
                    
                        Observação
                            
                        
                        Esta tabela  é constantemente lida pela CSM Center, portanto pode ser necessário parar a CSM Center